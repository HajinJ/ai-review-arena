{
  "models": {
    "claude": {
      "enabled": true,
      "roles": ["security", "bugs", "architecture"],
      "agent_model": "sonnet",
      "max_parallel_agents": 3
    },
    "codex": {
      "enabled": true,
      "roles": ["bugs", "performance"],
      "command": "codex exec --full-auto",
      "timeout_seconds": 120,
      "model_variant": "gpt-5.3-codex-spark",
      "structured_output": true,
      "multi_agent": {
        "enabled": true,
        "max_threads": 3,
        "max_depth": 1,
        "agents_dir": "config/codex-agents"
      }
    },
    "gemini": {
      "enabled": true,
      "roles": ["architecture", "testing"],
      "command": "gemini",
      "timeout_seconds": 120,
      "model_variant": "gemini-3-pro-preview"
    }
  },
  "review": {
    "intensity": "standard",
    "focus_areas": ["security", "bugs", "architecture", "performance", "testing"],
    "confidence_threshold": 75,
    "max_file_lines": 500,
    "file_extensions": ["ts", "tsx", "js", "jsx", "py", "go", "rs", "java", "kt", "swift", "rb", "php", "c", "cpp", "cs"],
    "exclude_patterns": ["*.test.*", "*.spec.*", "*.d.ts", "node_modules/**", "vendor/**", "dist/**"]
  },
  "debate": {
    "enabled": true,
    "max_rounds": 3,
    "cross_examination_enabled": true,
    "challenge_threshold": 60,
    "consensus_threshold": 80,
    "require_majority": true,
    "web_search_enabled": true,
    "round2_timeout_seconds": 180,
    "round3_timeout_seconds": 180
  },
  "hook_mode": {
    "enabled": false,
    "batch_size": 5,
    "min_lines_changed": 10,
    "debounce_writes": 3
  },
  "gemini_hooks": {
    "enabled": true,
    "event_types": ["AfterTool"],
    "tool_matchers": ["write_file", "replace_in_file", "patch"]
  },
  "websocket": {
    "enabled": true,
    "url": "wss://api.openai.com/v1/responses",
    "connection_timeout_seconds": 30,
    "max_connection_minutes": 55,
    "store": false,
    "model": "gpt-5.3-codex-spark"
  },
  "output": {
    "language": "ko",
    "format": "markdown",
    "show_cost_estimate": true,
    "show_model_attribution": true,
    "show_confidence_scores": true,
    "show_debate_log": false,
    "post_to_github": false
  },
  "intensity_presets": {
    "quick": {
      "phases": ["codebase"],
      "agent_team": false,
      "models_active": 0,
      "focus_areas_max": 2,
      "debate_rounds": 0,
      "file_lines_max": 200,
      "reviewer_roles": [],
      "description_ko": "코드베이스 분석 + Claude 단독 처리, Agent Team 없음",
      "description_en": "Codebase analysis + Claude solo, no Agent Team"
    },
    "standard": {
      "models_active": 2,
      "focus_areas_max": 4,
      "debate_rounds": 3,
      "file_lines_max": 500,
      "reviewer_roles": ["security-reviewer", "bug-detector", "performance-reviewer", "scope-reviewer", "test-coverage-reviewer", "observability-reviewer"],
      "description_ko": "표준 리뷰 - 6 에이전트, 2개 모델, 3라운드 교차심문",
      "description_en": "Standard review - 6 agents, 2 models, 3-round cross-examination"
    },
    "deep": {
      "models_active": 3,
      "focus_areas_max": 5,
      "debate_rounds": 3,
      "file_lines_max": 1000,
      "reviewer_roles": ["security-reviewer", "bug-detector", "performance-reviewer", "scope-reviewer", "test-coverage-reviewer", "observability-reviewer", "architecture-reviewer", "dependency-reviewer", "api-contract-reviewer", "data-integrity-reviewer"],
      "description_ko": "심층 리뷰 - 10 에이전트, 3개 모델, 3라운드 교차심문",
      "description_en": "Deep review - 10 agents, 3 models, 3-round cross-examination"
    },
    "comprehensive": {
      "models_active": 3,
      "focus_areas_max": 5,
      "debate_rounds": 3,
      "file_lines_max": 2000,
      "reviewer_roles": ["security-reviewer", "bug-detector", "performance-reviewer", "scope-reviewer", "test-coverage-reviewer", "observability-reviewer", "architecture-reviewer", "dependency-reviewer", "api-contract-reviewer", "data-integrity-reviewer", "accessibility-reviewer", "configuration-reviewer"],
      "description_ko": "종합 리뷰 - 12 에이전트, 3개 모델, 전체 포커스, 3라운드 토론",
      "description_en": "Comprehensive review - 12 agents, 3 models, all focus areas, 3 debate rounds"
    }
  },
  "arena": {
    "enabled": true,
    "phases": ["codebase", "stack", "research", "compliance", "benchmark", "review"],
    "default_phase": "all",
    "interactive_by_default": false
  },
  "cache": {
    "enabled": true,
    "base_dir": "~/.claude/plugins/ai-review-arena/cache",
    "default_ttl_days": 3,
    "ttl_overrides": {
      "stack": 7,
      "research": 3,
      "compliance": 7,
      "benchmarks": 14,
      "figma": 1
    },
    "max_cache_size_mb": 50,
    "cleanup_age_days": 30
  },
  "benchmarks": {
    "enabled": true,
    "auto_run": true,
    "rerun_threshold_days": 14,
    "min_score_for_role": 60,
    "test_cases_dir": "config/benchmarks"
  },
  "compliance": {
    "enabled": true,
    "auto_detect": true,
    "rules_file": "config/compliance-rules.json"
  },
  "routing": {
    "enabled": true,
    "strategy": "feedback_benchmark",
    "fallback": "default",
    "feedback_weight": 0.6,
    "benchmark_weight": 0.4,
    "min_feedback_samples": 5
  },
  "business": {
    "enabled": true,
    "default_type": "content",
    "default_audience": "general",
    "default_tone": "formal",
    "focus_areas": ["accuracy-evidence", "audience-fit", "competitive-positioning", "communication-narrative", "market-fit"],
    "confidence_threshold": 70
  },
  "business_intensity_presets": {
    "quick": {
      "phases": ["context"],
      "agent_team": false,
      "review_agents": 0,
      "debate_rounds": 0,
      "reviewer_roles": [],
      "description_ko": "비즈니스 컨텍스트 분석 + Claude 단독 처리",
      "description_en": "Business context analysis + Claude solo"
    },
    "standard": {
      "phases": ["context", "market", "strategy", "review", "report"],
      "agent_team": true,
      "review_agents": 5,
      "reviewer_roles": ["accuracy-evidence-reviewer", "audience-fit-reviewer", "communication-narrative-reviewer", "competitive-positioning-reviewer", "market-fit-reviewer"],
      "external_models_cross_review": true,
      "debate_rounds": 3,
      "description_ko": "표준 비즈니스 리뷰 - 5 에이전트 + 외부 모델 교차검토, 3라운드 토론",
      "description_en": "Standard business review - 5 agents + external model cross-review, 3-round debate"
    },
    "deep": {
      "phases": ["context", "market", "research", "accuracy", "strategy", "review", "report"],
      "agent_team": true,
      "review_agents": 9,
      "reviewer_roles": ["accuracy-evidence-reviewer", "audience-fit-reviewer", "communication-narrative-reviewer", "competitive-positioning-reviewer", "market-fit-reviewer", "financial-credibility-reviewer", "legal-compliance-reviewer", "localization-reviewer", "investor-readiness-reviewer"],
      "external_models_cross_review": true,
      "debate_rounds": 3,
      "description_ko": "심층 비즈니스 리뷰 - 9 에이전트 + 외부 모델 교차검토, 리서치+정확성 감사",
      "description_en": "Deep business review - 9 agents + external model cross-review, research + accuracy audit"
    },
    "comprehensive": {
      "phases": ["context", "market", "research", "accuracy", "benchmark", "strategy", "review", "report"],
      "agent_team": true,
      "review_agents": 10,
      "reviewer_roles": ["accuracy-evidence-reviewer", "audience-fit-reviewer", "communication-narrative-reviewer", "competitive-positioning-reviewer", "market-fit-reviewer", "financial-credibility-reviewer", "legal-compliance-reviewer", "localization-reviewer", "investor-readiness-reviewer", "conversion-impact-reviewer"],
      "external_models": true,
      "debate_rounds": 3,
      "description_ko": "종합 비즈니스 리뷰 - 10 에이전트 + 외부 모델, 벤치마크 기반 역할 배정, 전체 토론",
      "description_en": "Comprehensive business review - 10 agents + external models, benchmark-driven role assignment, full debates"
    }
  },
  "business_debate": {
    "enabled": true,
    "max_rounds": 3,
    "challenge_threshold": 60,
    "consensus_threshold": 75,
    "require_majority": true,
    "web_search_enabled": true,
    "round2_timeout_seconds": 180,
    "round3_timeout_seconds": 180
  },
  "fallback": {
    "external_cli_timeout_seconds": 120,
    "external_cli_debate_timeout_seconds": 180,
    "retry_attempts": 1,
    "retry_delay_seconds": 5,
    "strategy": "graceful_degradation",
    "levels": {
      "level_0": "full_operation",
      "level_1": "benchmark_failure_use_defaults",
      "level_2": "research_failure_skip_context",
      "level_3": "agent_teams_failure_use_subagents",
      "level_4": "external_cli_failure_claude_only",
      "level_5": "all_failure_inline_analysis"
    },
    "report_impact": true
  },
  "business_models": {
    "codex": {
      "enabled": true,
      "role": "cross-reviewer",
      "timeout_seconds": 120,
      "script": "scripts/codex-business-review.sh"
    },
    "gemini": {
      "enabled": true,
      "role": "cross-reviewer",
      "timeout_seconds": 120,
      "script": "scripts/gemini-business-review.sh"
    }
  },
  "business_benchmarks": {
    "enabled": true,
    "auto_run": true,
    "rerun_threshold_days": 14,
    "min_score_for_role": 60,
    "test_cases_dir": "config/benchmarks",
    "test_case_prefix": "business-",
    "script": "scripts/benchmark-business-models.sh"
  },
  "cost_estimation": {
    "enabled": true,
    "show_before_execution": true,
    "auto_proceed_under_dollars": 5.0,
    "token_cost_per_1k": {
      "claude_input": 0.003,
      "claude_output": 0.015,
      "codex_input": 0.003,
      "codex_output": 0.012,
      "gemini_input": 0.00125,
      "gemini_output": 0.005
    },
    "prompt_cache_discount": 0.0
  },
  "intensity_checkpoints": {
    "enabled": true,
    "check_after_phases": ["research", "compliance"],
    "allow_upgrade": true,
    "allow_downgrade": true,
    "auto_adjust_threshold": 7,
    "notify_user": true
  },
  "feedback": {
    "enabled": true,
    "collect_interactive": true,
    "storage_dir": "cache/feedback",
    "report_period_days": 30,
    "use_for_routing": true,
    "min_samples_for_routing": 5,
    "routing_refresh_interval_hours": 24
  },
  "context_forwarding": {
    "enabled": true,
    "max_tokens": {
      "summary_fields": 2000,
      "content_text": 15000,
      "metadata": 1000,
      "total_hard_limit": 20000
    },
    "summarize_if_exceeds": true
  },
  "context_density": {
    "enabled": true,
    "role_based_filtering": true,
    "agent_context_budget_tokens": 8000,
    "role_filters": {
      "security": {
        "include_patterns": ["auth", "login", "password", "token", "session", "cookie", "csrf", "cors", "sanitiz", "escap", "encrypt", "hash", "secret", "key", "inject", "query", "exec", "spawn", "eval"],
        "include_file_patterns": ["*auth*", "*security*", "*middleware*", "*session*", "*crypto*"],
        "priority": "input_validation_and_auth_flows"
      },
      "bugs": {
        "include_patterns": ["catch", "throw", "error", "Error", "null", "undefined", "async", "await", "promise", "Promise", "race", "lock", "mutex", "atomic", "try", "reject", "finally", "fallback", "retry", "abort", "fail", "semaphore", "channel", "concurrent", "thread", "worker", "typeof", "instanceof", "optional"],
        "include_file_patterns": ["*"],
        "priority": "error_handling_concurrency_and_control_flow"
      },
      "performance": {
        "include_patterns": ["for", "while", "map", "filter", "reduce", "query", "select", "join", "index", "cache", "memo", "async", "await", "Promise.all", "setTimeout", "setInterval", "buffer", "stream", "circuit", "breaker", "retry", "timeout", "health", "ready", "trace", "metric", "pool", "drain", "graceful", "shutdown"],
        "include_file_patterns": ["*service*", "*repository*", "*handler*", "*controller*", "*route*", "*health*", "*metrics*", "*middleware*"],
        "priority": "hot_paths_data_operations_and_production_readiness"
      },
      "architecture": {
        "include_patterns": ["import", "export", "class", "interface", "extends", "implements", "module", "inject", "provider", "factory", "singleton", "abstract"],
        "include_file_patterns": ["*"],
        "priority": "module_boundaries_and_dependencies"
      },
      "testing": {
        "include_patterns": ["describe", "it", "test", "expect", "assert", "mock", "spy", "stub", "before", "after", "jest", "vitest", "pytest"],
        "include_file_patterns": ["*test*", "*spec*", "*.test.*", "*.spec.*"],
        "priority": "test_files_and_tested_code"
      },
      "dependency": {
        "include_patterns": ["import", "require", "from", "dependency", "package", "version", "module"],
        "include_file_patterns": ["package.json", "package-lock.json", "yarn.lock", "requirements.txt", "Pipfile", "go.mod", "Cargo.toml", "pom.xml", "build.gradle", "Gemfile"],
        "priority": "dependency_declarations_and_versions"
      },
      "scope": {
        "include_patterns": ["function", "class", "def", "module", "export"],
        "include_file_patterns": ["*"],
        "priority": "git_diff_and_strategy_document"
      },
      "api_contract": {
        "include_patterns": ["route", "endpoint", "handler", "controller", "request", "response", "status", "header", "param", "query", "body", "schema", "validate", "middleware", "swagger", "openapi", "graphql", "grpc", "proto", "version", "deprecat"],
        "include_file_patterns": ["*route*", "*controller*", "*handler*", "*endpoint*", "*api*", "*schema*", "*.proto", "*.graphql"],
        "priority": "api_routes_and_schema_definitions"
      },
      "observability": {
        "include_patterns": ["log", "logger", "logging", "trace", "tracing", "span", "metric", "metrics", "monitor", "alert", "health", "readiness", "liveness", "probe", "sentry", "datadog", "prometheus", "grafana", "correlation", "request_id", "console.log", "console.error", "winston", "pino", "bunyan", "debug"],
        "include_file_patterns": ["*logger*", "*logging*", "*trace*", "*metric*", "*monitor*", "*health*", "*middleware*"],
        "priority": "logging_tracing_and_monitoring"
      },
      "data_integrity": {
        "include_patterns": ["schema", "validate", "validation", "transform", "serialize", "deserialize", "migration", "migrate", "constraint", "foreign", "reference", "integrity", "transaction", "commit", "rollback", "zod", "joi", "yup", "prisma", "typeorm", "sequelize", "knex", "model", "entity"],
        "include_file_patterns": ["*model*", "*schema*", "*migration*", "*entity*", "*validator*", "*transform*", "*repository*", "*dao*"],
        "priority": "data_validation_migration_and_consistency"
      },
      "accessibility": {
        "include_patterns": ["aria", "role", "tabindex", "alt", "label", "labelledby", "describedby", "focus", "keyboard", "screen-reader", "a11y", "wcag", "contrast", "semantic", "nav", "heading", "button", "input", "form", "dialog", "modal", "sr-only", "visually-hidden"],
        "include_file_patterns": ["*.tsx", "*.jsx", "*.vue", "*.svelte", "*.html", "*component*", "*page*", "*layout*"],
        "priority": "wcag_compliance_and_assistive_technology"
      },
      "configuration": {
        "include_patterns": ["env", "config", "secret", "credential", "token", "key", "password", "connection", "database", "redis", "port", "host", "url", "endpoint", "feature_flag", "toggle", "docker", "kubernetes", "k8s", "helm", "terraform", "ansible", "ci", "cd", "pipeline", "deploy"],
        "include_file_patterns": ["*.env*", "*.yml", "*.yaml", "*.toml", "*.ini", "*.cfg", "*config*", "*setting*", "Dockerfile*", "docker-compose*", ".github/*", "*.tf"],
        "priority": "environment_secrets_and_infrastructure"
      }
    },
    "chunking": {
      "enabled": true,
      "threshold_multiplier": 2.0,
      "max_chunks_per_role": 4,
      "overlap_lines": 10,
      "merge_dedup_line_proximity": 3
    },
    "compression_strategy": "role_relevant_extract",
    "fallback_on_small_files": true,
    "small_file_threshold_lines": 200
  },
  "memory_tiers": {
    "enabled": true,
    "working_memory": {
      "scope": "current_session",
      "description": "Session variables and current context — managed by pipeline phases automatically"
    },
    "short_term": {
      "enabled": true,
      "storage_dir": "cache/short-term",
      "ttl_days": 7,
      "track": ["recurring_findings", "recent_review_patterns", "session_decisions"],
      "max_entries_per_project": 100,
      "description": "Per-project patterns from recent reviews — what issues keep appearing"
    },
    "long_term": {
      "enabled": true,
      "storage_dir": "cache/long-term",
      "ttl_days": 90,
      "track": ["model_accuracy_by_category", "accepted_vs_rejected_findings", "feedback_trends"],
      "max_entries_per_project": 500,
      "description": "Cross-session learnings — which patterns are useful, model strengths over time"
    },
    "permanent": {
      "enabled": true,
      "storage_dir": "cache/permanent",
      "ttl_days": -1,
      "track": ["team_coding_standards", "project_architecture_decisions", "known_acceptable_patterns"],
      "max_entries_per_project": 200,
      "description": "Team standards and architecture decisions — never expires, manually curated"
    }
  },
  "pipeline_evaluation": {
    "enabled": true,
    "test_cases_dir": "config/benchmarks/pipeline",
    "metrics": ["precision", "recall", "f1", "false_positive_rate", "time_to_finding"],
    "llm_as_judge": {
      "enabled": true,
      "position_bias_mitigation": true,
      "judge_model": "sonnet",
      "evaluation_criteria": ["finding_accuracy", "severity_calibration", "suggestion_quality", "report_completeness"]
    },
    "auto_run_after_review": false,
    "report_dir": "cache/evaluation-reports"
  }
}
